<!DOCTYPE html>
<html>

<head>
    <!-- Startup configuration -->
    <link rel="manifest" href="/resources/manifest.webmanifest">
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>@title</title>
    <!--<title>@title</title>-->
    <script>
        const loadJavaScriptSync = function (filePath) {
            const req = new XMLHttpRequest();
            req.open("GET", filePath, false); // 'false': synchronous.
            req.send(null);

            const headElement = document.getElementsByTagName("head")[0];
            const newScriptElement = document.createElement("script");
            newScriptElement.type = "text/javascript";
            newScriptElement.text = req.responseText;
            headElement.appendChild(newScriptElement);
        }
        const loadJavaScript = function (filePath, async) {
            const headElement = document.getElementsByTagName('head')[0];
            const newScriptElement = document.createElement('script');
            newScriptElement.type = 'text/javascript';
            newScriptElement.src = filePath;
            newScriptElement.async = async;
            headElement.appendChild(newScriptElement);
        };
        const loadScripts = function () {
            loadJavaScript('/resources/polymer/@webcomponents/webcomponentsjs/webcomponents-bundle.js', 'true');
            loadJavaScript('/resources/polymer/web-animations-js/web-animations-next-lite.min.js', 'true');
            loadJavaScript('/resources/lodash/4.17.11/lodash.min.js', 'false');
            loadJavaScript('/resources/postal/2.0.5/postal.min.js', 'true');
            loadJavaScript('/resources/filesaver/FileSaver.min.js', 'true');
            import('/resources/@startupResources.js');
        };
        if (@service-worker && 'serviceWorker' in navigator) {
            navigator.serviceWorker.register('/service-worker.js').then(function (registration) {
                if (registration.active) {
                    loadScripts();
                } else {
                    registration.onupdatefound = function () {
                        const installingWorker = registration.installing;
                        installingWorker.onstatechange = function () {
                            if (installingWorker.state === 'activated') {
                                loadScripts();
                            }
                        };
                    };
                }
            });
        }
    </script>
    
    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="@title">
    <link rel="icon" sizes="192x192" href="/resources/icons/tg-icon192x192.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="@title">
    <link rel="apple-touch-icon" href="/resources/icons/tg-icon.png">

    <!-- Tile icon for Win8 (144x144) -->
    <meta name="msapplication-TileImage" content="/resources/icons/tg-icon144x144.png">

    <style>
        html {
            font-size: 10pt;
        }
        body {
            font-family: 'Roboto', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            font-size: 10pt;
        }
    </style>
    <custom-style>
        <style include="iron-flex iron-flex-reverse iron-flex-alignment iron-flex-factors iron-positioning"></style>
    </custom-style>
</head>

<body unresolved class="fullbleed relative">
    <tg-app-template class="fit layout vertical"></tg-app-template>
</body>

</html>