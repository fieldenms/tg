<!doctype html>
<html>

<head>
    <!--meta charset="utf-8"-->
    <title>Generated Master</title>
    <link rel="stylesheet" type="text/css" crossorigin="anonymous" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,300,300italic,400italic,500,500italic,700,700italic"></link>
    <script type="module">
        import '@fieldenms/tg-polymer/iron-flex-layout/iron-flex-layout-classes.js'; // fullbleed class
        import '@fieldenms/tg-polymer/paper-styles/paper-styles-classes.js'; // Roboto font
        import '/master_ui/ua.com.fielden.platform.security.user.UserRolesUpdater.js';
    </script>
    <custom-style>
        <style include="iron-flex iron-flex-reverse iron-flex-alignment iron-flex-factors iron-positioning">
            body {
                font-family: 'Roboto', 'Helvetica Neue', Helvetica, Arial, sans-serif;
                font-size: 10pt;
            }
            .confirm-dialog paper-button { /* tg-confirmation-dialog -specific */
                color: var(--paper-light-blue-500);
                --paper-button-flat-focus-color: var(--paper-light-blue-50);
            }
            .confirm-dialog paper-button:hover {
                background: var(--paper-light-blue-50);
            }
        </style>
    </custom-style>
</head>

<body unresolved class="fullbleed">
    <tg-userrolesupdater-master id="master" entity-type="ua.com.fielden.platform.security.user.UserRolesUpdater"
        entity-id="new" current-state="EDIT">
    </tg-userrolesupdater-master>
    <script>
       customElements.whenDefined('tg-userrolesupdater-master').then(() => {
            // imports are loaded and elements have been registered
            console.log('Components are ready');
            const master = document.querySelector('#master');
            master.postRetrieved = function (entity, bindingEntity, customObject) {
                console.log("postRetrieved");
            };
            master.postValidated = function (validatedEntity, bindingEntity, customObject) {
                console.log("postValidated");
            };
            master.postSaved = function (potentiallySavedOrNewEntity, newBindingEntity) {
                console.log("postSaved");
            };
            const user = master._reflector().newEntity("ua.com.fielden.platform.security.user.User");
            user.id = 0;
            user.key = 'SU';
            
            const getSelectedEntities = () => [ user ];
            const contextHolder = master._reflector().createContextHolder(
                null, 'ONE', null,
                null, getSelectedEntities, null,
                null
            );
            
            master._reflector().setCustomProperty(contextHolder, "@@miType", 'ua.com.fielden.platform.ui.menu.sample.MiUser');
            master._reflector().setCustomProperty(contextHolder, "@@actionKind", 'SECONDARY_RESULT_SET');
            master._reflector().setCustomProperty(contextHolder, "@@actionNumber", 0);
            master._reflector().setCustomProperty(contextHolder, "@@saveAsName", '');
            master.retrieve(contextHolder);
        });
    </script>
</body>

</html>